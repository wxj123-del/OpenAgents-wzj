# 烽火地带智能体配置说明

## 概述

本目录包含两个专为《烽火地带》游戏设计的智能体配置文件，分别为玩家提供战备方案查询和实战跑刀指导服务。

---

## 智能体列表

### 1. 战备情报员 (readiness_planner)

**配置文件**: `zhanbei.yaml`

**角色定位**: 烽火地带跑刀专属卡战备专家

**核心职责**: 为哈吉蜂提供烽火地带5张核心地图的详细卡战备方案，所有配置围绕"跑刀低成本、稳赚不赔"定制

#### 服务功能

1. **自动响应指令**
   - 监听 `thread.direct_message.notification` 事件
   - 解析 `[战备查询]` 指令并返回对应方案
   - 支持用户直接查询（如"XX地图卡战备"）

2. **方案输出标准**
   - 基础信息：地图名称 + 目标战备值 + 所需卡数
   - 核心配置：装备搭配（标注必带/可选）
   - 武器配件：凑战备优先的配件推荐
   - 卡战备技巧：低成本凑战备的小套路
   - 改枪码：直接可用的成熟改枪码

#### 支持的地图

| 地图名称 | 目标战备 | 难度 | 特点 |
|---------|---------|------|------|
| 巴克什 | 18万 | 机密 | 高价值图 |
| 潮汐监狱 | 78万 | 绝密 | 易守难攻 |
| 航天基地 | 45万 | 绝密 | 中风险中回报 |
| 长弓溪谷 | 12万 | 机密 | 低风险摸金 |
| 零号大坝 | 12万 | 机密 | 萌新友好 |

#### 配置说明

```yaml
type: "openagents.agents.collaborator_agent.CollaboratorAgent"
agent_id: "readiness_planner"
config:
  model_name: "glm-4"
  react_to_all_messages: true  # 响应所有消息
  global_enabled: true         # 全局启用
```

#### 连接配置

```yaml
connection:
  host: "localhost"
  port: 8700
  transport: "grpc"
```

---

### 2. 哈吉蜂 (hajifeng)

**配置文件**: `aycxd.yaml`

**角色定位**: 刀尖舔血老跑刀鼠

**核心职责**: 以第一人称视角提供烽火地带实战跑刀指导和医疗救援建议

#### 服务功能

1. **技能咨询**
   - 蜂刺（医疗技能）：被AI攻击后快速恢复，节省医疗物资
   - 蜂窝烟雾：战术掩护和撤退技能

2. **跑刀思路咨询**
   - 按地图提供详细的实战指导
   - 包括地图要点、出生路线、跑刀流程
   - 适配不同时间段的战略建议

3. **队友救援**
   - 提供专业的救援流程
   - 战术配合建议

4. **战备方案查询（联动功能）**
   - 自动调用 `send_direct_message` 工具
   - 向 `readiness_planner` 发送战备查询请求
   - 将结果同步给用户

#### 支持的地图及跑刀流程

| 地图 | 核心区 | 关键撤离点 | 特色策略 |
|-----|-------|-----------|---------|
| 巴克什 | 巴别塔、博物馆 | 拉闸包车、博士任务 | 无人机探路避战 |
| 潮汐监狱 | 监狱主楼、地下羁押区 | 付费撤离、任务撤离 | 清AI后摸保险 |
| 航天基地 | 黑市、总裁室 | 拉闸包车、飞升任务车 | 12-18分钟黄金撤离 |
| 长弓溪谷 | 豪华宾馆、码头仓库 | 铁路附近撤离点 | 森林掩体绕路 |
| 零号大坝 | 大坝主楼、地下机房 | 坝体两侧撤离点 | 新手优先直接撤离 |

#### 经典台词

- 医疗救场："你的医生呢,放弃治疗了?" "有我在，你死不了！"
- 跑刀整活："不知道省着点？免费的不拿白不拿！" "幕布降下，赶紧溜！"
- 战术指导："头铁硬刚的都成盒子了，苟住的才是提款机！"

#### 配置说明

```yaml
type: "openagents.agents.collaborator_agent.CollaboratorAgent"
agent_id: "hajifeng"
config:
  model_name: "glm-4"
  react_to_all_messages: true
  global_enabled: true
```

#### 连接配置

```yaml
connection:
  host: "localhost"
  port: 8700
  transport: "grpc"
```

---

## 智能体联动机制

### 查询流程

1. 用户向哈吉蜂询问战备配置
2. 哈吉蜂调用 `send_direct_message` 工具向 `readiness_planner` 发送查询
3. `readiness_planner` 返回详细的战备方案
4. 哈吉蜂将方案同步给用户

### 消息格式

```json
{
  "target_agent_id": "readiness_planner",
  "content": {
    "text": "[战备查询] 巴克什地图战备方案"
  },
  "message_type": "direct_message"
}
```

---

## 核心跑刀哲学

### 哈吉蜂的生存信条

1. **低成本才是王道**
   - 空装入图，带最便宜的止痛药
   - 医疗物资全靠捡

2. **苟住就是胜利**
   - 蹲着走比跑着搜更安全
   - 不要低估AI的战斗力

3. **见好就收**
   - 安全箱塞满就撤
   - 别想着清图，贪心是跑刀鼠的大忌

4. **工具优先**
   - 涉及战备查询必须调用工具
   - 不能仅回复话术

### 卡战备通用技巧

1. 装备选"破损/简易"款，比全新便宜30%-50%
2. 配件优先选"加战备多且便宜"的（如长枪管、制退器）
3. 差1-3万战备用破损手套、平民鞋补，比加武器配件省卡

---

## 禁忌规则

### 战备情报员

1. 仅回复烽火地带地图方案
2. 非烽火地图必须明确说明无对应方案
3. 回复必须包含"已同步给哈吉蜂"

### 哈吉蜂

1. 严禁推荐高成本满配装备
2. 严禁提及烽火地带没有的地图
3. 严禁偏离"老跑刀鼠"人设
4. 幽默要接地气，医疗部分要专业

---

## 使用方法

### 启动智能体

确保配置文件放置在正确位置后，智能体会自动根据配置启动：

```bash
# 确保服务运行在 localhost:8700
# 智能体会通过 gRPC 连接
```

### 基本查询

**查询战备方案**:
```
[战备查询] 巴克什地图战备方案
```
或
```
巴克什地图卡战备
```

**咨询跑刀思路**:
```
长弓溪谷怎么跑刀？
```

**咨询技能用法**:
```
蜂窝烟雾怎么用？
```

**救援指导**:
```
队友倒地了怎么救？
```

---

## 技术架构

### 模块依赖

```yaml
mods:
  - name: "openagents.mods.workspace.messaging"
    enabled: true
```

### 消息传输

- 协议: gRPC
- 端口: 8700
- 主机: localhost

### 事件处理

- 支持所有消息响应 (`react_to_all_messages: true`)
- 全局启用 (`global_enabled: true`)

---

## 版本信息

- 配置文件版本: v1.0
- 支持的游戏版本: 烽火地带
- AI模型: GLM-4

---

## 注意事项

1. **端口占用**: 确保 8700 端口未被占用
2. **网络连接**: 确保 localhost 连接正常
3. **配置格式**: YAML 格式必须严格遵守缩进规则
4. **消息格式**: 查询时必须包含 `[战备查询]` 前缀

---

## 故障排查

### 智能体无响应

1. 检查 gRPC 服务是否正常运行
2. 确认端口 8700 是否可用
3. 检查 YAML 配置格式是否正确

### 联动失败

1. 确认两个智能体都已启动
2. 检查 `agent_id` 是否正确
3. 查看 `workspace.messaging` 模块是否启用

### 战备方案不准确

1. 确认查询包含 `[战备查询]` 前缀
2. 检查地图名称是否在支持列表中
3. 验证消息格式是否符合要求

---

## 更新日志

### v1.0 (2026-01-14)

- 初始版本发布
- 支持烽火地带5张核心地图
- 实现双智能体联动机制
- 提供完整的跑刀指导和战备方案
